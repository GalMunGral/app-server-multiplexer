<html>
<body>
<input id="url-input" type="url">
<button id="load-button" type="button">Go</button>
<script>
  if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js')
    .then(r => {
      const worker = r.installing || r.waiting || r.active;
      if (worker.state === 'activated') {
        document.querySelector('#load-button').addEventListener('click', () => {
          let input = document.querySelector('#url-input').value;
          if (!input.match(/(http|https):\/\//)) {
            input = 'https://' + input;
          }
          const url = new URL(input);
          worker.postMessage(url.origin);
          fetch(url).then(res => res.text()).then(text => {
            document.write(text);
            history.pushState(null, null, url.pathname);
          })
        })
      }
    })
    .catch((error) => console.log('Failed!', error));
  }
</script>
</body>
</html>